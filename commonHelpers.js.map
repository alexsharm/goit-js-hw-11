{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst form = document.querySelector('.search-form');\nconst searchBtn = document.querySelector('.search-btn');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\n\nconst galleryLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(evt) {\n  evt.preventDefault();\n  gallery.innerHTML = '';\n  gallery.insertAdjacentHTML('beforebegin', '<span class=\"loader\"></span>');\n  const searchParams = new URLSearchParams({\n    key: '41849912-0888eabd10c40a0c420151dd5',\n    q: `${searchInput.value}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  fetch(`https://pixabay.com/api/?${searchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      form.reset();\n      document.querySelector('.loader').remove();\n      if (data.hits.length === 0) {\n        const errorAlert = iziToast.error({\n          message:\n            'Sorry, there are no images matching <br> your search query. Please try again!',\n          position: 'topRight',\n          class: 'error-alert',\n          onOpened: function () {\n            searchBtn.addEventListener('click', () => {\n              iziToast.destroy();\n            });\n          },\n          onClosed: function () {\n            searchBtn.removeEventListener('click', () => {\n              iziToast.destroy();\n            });\n          },\n        });\n      } else {\n        const htmlMarkup = data.hits\n          .map(\n            image =>\n              `\n        <li class=\"gallery-item\">\n         <a href=\"${image.largeImageURL}\">\n             <img class='gallery-image' src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n         </a>\n        <div class=\"info-cont\">\n          <div class=\"info-item\">\n            <h4><b>Likes</b></h4>\n            <p>${image.likes}</p>\n          </div>\n          <div class=\"info-item\">\n            <h4><b>Views</b></h4>\n            <p>${image.views}</p>\n          </div>\n          <div class=\"info-item\">\n            <h4><b>Comments</b></h4>\n            <p>${image.comments}</p>\n          </div>\n          <div class=\"info-item\">\n            <h4><b>Downloads</b></h4>\n            <p>${image.downloads}</p>\n          </div>\n        </div>\n        </li>\n              `\n          )\n          .join('');\n        gallery.insertAdjacentHTML('afterbegin', htmlMarkup);\n        galleryLightbox.refresh();\n      }\n    })\n    .catch(error => {\n      alert('An error occured');\n      console.log(error);\n    });\n}\n"],"names":["form","searchBtn","searchInput","gallery","galleryLightbox","SimpleLightbox","handleSubmit","evt","searchParams","response","data","iziToast","htmlMarkup","image","error"],"mappings":"wvBAIA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAkB,IAAIC,EAAe,aAAc,CACvD,aAAc,KAChB,CAAC,EAEDL,EAAK,iBAAiB,SAAUM,CAAY,EAE5C,SAASA,EAAaC,EAAK,CACzBA,EAAI,eAAc,EAClBJ,EAAQ,UAAY,GACpBA,EAAQ,mBAAmB,cAAe,8BAA8B,EACxE,MAAMK,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAG,GAAGN,EAAY,QAClB,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACD,MAAM,4BAA4BM,GAAc,EAC7C,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CAGZ,GAFAV,EAAK,MAAK,EACV,SAAS,cAAc,SAAS,EAAE,OAAM,EACpCU,EAAK,KAAK,SAAW,EACJC,EAAS,MAAM,CAChC,QACE,gFACF,SAAU,WACV,MAAO,cACP,SAAU,UAAY,CACpBV,EAAU,iBAAiB,QAAS,IAAM,CACxCU,EAAS,QAAO,CAC9B,CAAa,CACF,EACD,SAAU,UAAY,CACpBV,EAAU,oBAAoB,QAAS,IAAM,CAC3CU,EAAS,QAAO,CAC9B,CAAa,CACF,CACX,CAAS,MACI,CACL,MAAMC,EAAaF,EAAK,KACrB,IACCG,GACE;AAAA;AAAA,oBAEMA,EAAM;AAAA,+CACqBA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKhEA,EAAM;AAAA;AAAA;AAAA;AAAA,iBAINA,EAAM;AAAA;AAAA;AAAA;AAAA,iBAINA,EAAM;AAAA;AAAA;AAAA;AAAA,iBAINA,EAAM;AAAA;AAAA;AAAA;AAAA,eAKZ,EACA,KAAK,EAAE,EACVV,EAAQ,mBAAmB,aAAcS,CAAU,EACnDR,EAAgB,QAAO,CACxB,CACP,CAAK,EACA,MAAMU,GAAS,CACd,MAAM,kBAAkB,EACxB,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL"}